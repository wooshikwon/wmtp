# MacBook M3 Test Configuration for Critic WMTP Algorithm
# Optimized for Apple Silicon with MPS (Metal Performance Shaders)

# Project metadata
project: "wmtp_m3_test_critic"
seed: 42

# Path configurations
paths:
  models:
    base: "file://tests/test_models/distilgpt2-mtp"  # MTP-enabled distilgpt2 for testing
    rm: "file://tests/test_models/tiny-reward-model-gpt2"  # GPT-2 based RM for value head training
    ref: "file://tests/test_models/distilgpt2"  # Regular distilgpt2 for reference
  datasets:
    mbpp: "file://tests/test_dataset/mbpp"
    contest: "file://tests/test_dataset/contest"
    humaneval: "file://tests/test_dataset/humaneval"
  checkpoints:
    base_path: "file://./test_checkpoints"  # Local test checkpoint storage
    save_interval: 100                      # 체크포인트 저장 간격 늘림
    keep_last: 1                           # 1개만 유지
    save_final: false                      # 최종 모델 저장 비활성화

# MLflow configuration - local tracking
mlflow:
  experiment: "wmtp/m3_test_critic"
  tracking_uri: "file:///tmp/mlflow_m3"
  registry_uri: "file:///tmp/mlflow_m3"

# Launcher configuration
launcher:
  target: "local"
  resources:
    gpus: 1
    gpu_type: "mps"
    cpus: 8
    memory_gb: 64
    disk_gb: 100

# Device configuration for MacBook M3
devices:
  compute_backend: "mps"
  mixed_precision: "fp32"
  fsdp:
    enabled: false
    auto_wrap: false
    activation_ckpt: false
    sharding: "full"
